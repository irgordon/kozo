<p align="center">
  <a href="https://kozo.page"><img src="kozo-logo.svg" width="240" alt="KOZO: Made Simple, Designed Secure."></a>
</p>

<p align="center">
  <img src="https://img.shields.io/badge/Built_with-Zig-F7A41D?style=for-the-badge&logo=zig&logoColor=white" />
  <img src="https://img.shields.io/badge/Built_with-Rust-B7410E?style=for-the-badge&logo=rust&logoColor=white" />
  <img src="https://img.shields.io/badge/Platform-KOZO_Native-000000?style=for-the-badge&logo=linux&logoColor=white" />
  <img src="https://img.shields.io/badge/License-FOSS-000000?style=for-the-badge&logo=opensourceinitiative&logoColor=white" />
  <img src="https://img.shields.io/badge/Architectures-x86__64%20%7C%20ARM64-000000?style=for-the-badge" />
</p>

# **KOZO**

**KOZO** is a next-generation operating system built from the ground up for privacy, performance, and peace of mind. By combining the precision of **Zig** with the safety of **Rust**, KOZO creates a computing environment that is "Secure by Default" without sacrificing the apps you love.

## **Why KOZO?**

- **Built-In Privacy**
  In KOZO, your data isn't just "protected"—it's unreachable. Using a **Zero Trust** model, apps only see exactly what you allow them to see. No more hidden tracking, no more "ambient" access to your files.

- **Unmatched Stability**
  By isolating every part of the system (drivers, internet, files) into its own "sandbox," KOZO ensures that a crash in one app never takes down the whole computer. It’s an OS that stays out of your way and just works.

- **Run Your Favorite Apps**
  You don't have to switch your workflow. KOZO features a built-in compatibility layer that allows standard Linux applications to run safely and smoothly, but with enhanced security and privacy controls.

- **Performance Without Compromise**
  We use a "Microkernel" design—keeping the core of the OS tiny and lightning-fast. This means faster boot times, smoother multitasking, and better battery life on laptops.

- **Clear-Name Security**
  We've replaced confusing "permissions" with **Clear-Name** prompts. Instead of cryptic codes, KOZO asks you simple questions: _"Allow the Browser to access your Downloads folder?"_ You are always in control.

## **Core Principles**

- **Simple & Modular**
  Every piece of KOZO does one thing and does it well. This makes the system easier to update, harder to break, and simpler to trust.

- **Defense-in-Depth**
  We assume threats exist and build layers of protection around your digital life. If one layer is ever compromised, the others remain locked tight.

- **Modern Foundations**
  Leveraging the latest in systems programming (Zig & Rust), KOZO avoids the "legacy baggage" of 40-year-old operating systems, focusing instead on the needs of today's users.

## **Project Structure**

```markdown
kozo/
├── build.zig # Central Orchestrator: Builds Loader, Kernel, and EFI Image
├── common/ # Shared between Loader and Kernel
│ └── boot_info.zig # The "Sacred Contract" (GOP, MMap, RSDP)
│
├── boot/ # NEW: Layer 0 - UEFI Bootloader (Zig)
│ ├── uefi/
│ │ ├── main.zig # Loader Entry: GOP, MMap, Paging Setup, Jump
│ │ ├── elf.zig # ELF64 Parser: Maps segments to LMA (4MB)
│ │ └── rsdp.zig # ACPI RSDP Locator
│
├── kernel/ # Layer 1: Zig Microkernel (Pure 64-bit)
│ ├── src/
│ │ ├── main.zig # \_kernel_start (VMA: 0xffffffff80000000)
│ │ ├── arch/
│ │ │ └── x86_64/
│ │ │ ├── gdt.zig # Kernel-owned Global Descriptor Table
│ │ │ ├── idt.zig # Interrupt Descriptor Table (Upcoming)
│ │ │ ├── paging.zig # Recursive Page Table Management
│ │ │ └── vga.zig # Framebuffer-based VgaWriter
│ │ ├── capability.zig # CNode operations
│ │ ├── ipc.zig # IPC logic
│ │ ├── memory.zig # Physical/Virtual memory managers
│ │ └── syscall.zig # Entry point for User-space
│ │
│ └── arch/x86_64/ # 64-bit ASM Stubs (No boot.S!)
│ ├── context.S # Integer register save/restore
│ ├── ipc.S # Direct-switch fastpath
│ ├── trap.S # Syscall/Interrupt stubs (swapgs, etc.)
│ └── linker.ld # Pure 64 Higher-Half Linker Script
│
├── services/ # Layer 2: Rust User Space
│ ├── kozo-sys/ # ABI lockstep
│ │ └── src/
│ │ ├── abi.rs # Generated by build.zig
│ │ └── boot_info.rs # Rust-side parsing of the handover struct
│ └── init/ # First User process
│
├── zig-out/ # Build artifacts (EFI compatible)
│ ├── efi/
│ │ └── boot/
│ │ └── bootx64.efi # The UEFI Application
│ ├── boot/
│ │ └── kozo-kernel # The ELF64 Kernel (Read by bootx64.efi)
│ └── include/
│ └── kozo_abi.h
│
└── OVMF.fd # Symlinked UEFI Firmware for QEMU
```

\*\*\* Critical File Relationships (ABI Lockstep)

```markdown
build.zig (triggers)
↓
GenerateAbiStep::make()
↓
├── kernel/include/kozo_abi.h # Zig kernel consumes
└── services/kozo-sys/src/abi.rs # Rust services consume (via KOZO_ABI_RS env)
```

**_ App Build Flow _**

```markdown
zig build ci
↓
preflight (check zig, rustc, dirs)
↓
generate-abi (lockstep abi.h + abi.rs)
↓
├── kernel (Zig) → kozo-kernel
├── init (Rust) → init binary
└── fsd (Rust) → fsd binary
↓
mkinitrd.sh (init + fsd → initrd.cpio)
↓
mkimage.sh (kernel + initrd → kozo.img)
↓
qemu-smoke (boot → "Init>" → "IPC_OK: fsd" → PASS)
```

## **Status**

KOZO is currently in early, active development. We are laying the foundations for a stable, public release. Early adopters and developers are encouraged to follow our architectural specs for deep-dive technical details.

## **License**

MIT + Apache 2.0 (dual-licensed)

---
